{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts","webpack:///src/app/services/caminhao/caminhao.service.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","authenticationService","caminhaoService","localNotifications","usuarioService","caminhoes","icon","fillColor","fillOpacity","strokeWeight","scale","anchor","google","maps","Point","labelOrigin","markers","lat","lng","coordinates","LatLng","mapOptions","center","zoom","usuario","currentUser","subscribe","arg","console","log","mapInitializer","map","Map","gmap","nativeElement","listarEnderecoUsuario","caminhaoStart","TrackPost","datapost","BuscarDispositivos","data","Server","dataServer","Session","dataSession","DEFAULT_WEBSOCKET_CONFIG","url","deserializer","e","JSON","parse","serializer","value","stringify","subject","msg","positions","i","length","position","marker","deviceId","color","caminhaoItem","filter","c","id","location","latitude","longitude","m","Marker","title","toString","setPosition","err","latLng1","latLng2","lat1","degreesToRadians","long1","lat2","long2","dLon","y","Math","sin","cos","x","radiansBearing","atan2","radiansToDegrees","degrees","PI","radians","ListarEndereco","user_id","index","element","addr_lat","addr_long","rotation","selector","template","CaminhaoService","httpClient","model","httpOptions","headers","get","pipe","handleError","bind","dataInicio","timeIni","dataFim","timeFim","post","put","withCredentials","body","errorResponse","error","ErrorEvent","message","providedIn"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,QAAMA,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEC,eAAS,EAAE;AAFb,KADqB,CAAvB;;AAWA,QAAaC,qBAAqB;AAAA;AAAA,KAAlC;;AAAaA,yBAAqB,6DAJjC,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAIiC,GAArBH,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIb,QAAaI,cAAc;AAAA;AAAA,KAA3B;;AAAaA,kBAAc,6DAT1B,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,0EAJO,CADD;AAORI,kBAAY,EAAE,CAAC,mDAAD;AAPN,KAAT,CAS0B,GAAdD,cAAc,CAAd;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACef,QAAaE,QAAQ;AA6BnB,wBAAoBC,qBAApB,EACUC,eADV,EAEUC,kBAFV,EAGUC,cAHV,EAG0C;AAAA;;AAHtB,aAAAH,qBAAA,GAAAA,qBAAA;AACV,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,kBAAA,GAAAA,kBAAA;AACA,aAAAC,cAAA,GAAAA,cAAA;AA7BV,aAAAC,SAAA,GAAY,EAAZ;AACA,aAAAC,IAAA,GAAO;AACP;AACEd,cAAI,EAAE,8bAFD;AAGLe,mBAAS,EAAE,OAHN;AAILC,qBAAW,EAAE,CAJR;AAKLC,sBAAY,EAAE,CALT;AAMLC,eAAK,EAAE,IANF;AAOLC,gBAAM,EAAE,IAAIC,MAAM,CAACC,IAAP,CAAYC,KAAhB,CAAsB,GAAtB,EAA2B,GAA3B,CAPH;AAQLC,qBAAW,EAAE,IAAIH,MAAM,CAACC,IAAP,CAAYC,KAAhB,CAAsB,GAAtB,EAA2B,GAA3B,CARR,CAQwC;;AARxC,SAAP;AAWA,aAAAE,OAAA,GAAU,EAAV;AAEA,aAAAC,GAAA,GAAM,CAAC,SAAP;AACA,aAAAC,GAAA,GAAM,CAAC,SAAP;AAIA,aAAAC,WAAA,GAAc,IAAIP,MAAM,CAACC,IAAP,CAAYO,MAAhB,CAAuB,KAAKH,GAA5B,EAAiC,KAAKC,GAAtC,CAAd;AACA,aAAAG,UAAA,GAAqC;AACnCC,gBAAM,EAAE,KAAKH,WADsB;AAEnCI,cAAI,EAAE;AAF6B,SAArC;AAS6C;;AAhC1B;AAAA;AAAA,mCAkCR;AAAA;;AACT,eAAKC,OAAL,GAAe,IAAI,uDAAJ,EAAf;AACA,eAAKvB,qBAAL,CAA2BwB,WAA3B,CACGC,SADH,CACa,UAAAC,GAAG,EAAI;AAChB,iBAAI,CAACH,OAAL,GAAeG,GAAf;AACAC,mBAAO,CAACC,GAAR,CAAY,KAAI,CAACL,OAAjB;AAED,WALH;AAMD;AA1CkB;AAAA;AAAA,0CA4CD;AAChB,eAAKM,cAAL,GADgB,CAEhB;AACD;AA/CkB;AAAA;AAAA,yCAiDF;AACf,eAAKC,GAAL,GAAW,IAAInB,MAAM,CAACC,IAAP,CAAYmB,GAAhB,CAAoB,KAAKC,IAAL,CAAUC,aAA9B,EAA6C,KAAKb,UAAlD,CAAX;AACA,eAAKc,qBAAL;AACA,eAAKC,aAAL,GAHe,CAIf;AACD;AAtDkB;AAAA;AAAA,wCAwDH;AAAA;;AACd,eAAKlC,eAAL,CAAqBmC,SAArB,GAAiCX,SAAjC,CAA2C,UAAAY,QAAQ,EAAI;AACrDV,mBAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,mBAAO,CAACC,GAAR,CAAYS,QAAZ;;AAGA,kBAAI,CAACpC,eAAL,CAAqBqC,kBAArB,CAAwC,IAAxC,EAA8Cb,SAA9C,CAAwD,UAAAc,IAAI,EAAI;AAC9D,oBAAI,CAACnC,SAAL,GAAiBmC,IAAjB;AACAZ,qBAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,qBAAO,CAACC,GAAR,CAAYW,IAAZ;;AACA,oBAAI,CAACtC,eAAL,CAAqBuC,MAArB,GAA8Bf,SAA9B,CAAwC,UAAAgB,UAAU,EAAI;AACpDd,uBAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,uBAAO,CAACC,GAAR,CAAYa,UAAZ;;AACA,sBAAI,CAACxC,eAAL,CAAqByC,OAArB,GAA+BjB,SAA/B,CAAyC,UAAAkB,WAAW,EAAI;AAEtDhB,yBAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,yBAAO,CAACC,GAAR,CAAYe,WAAZ;AACA,sBAAMC,wBAAwB,GAAgC;AAC5DC,uBAAG,EAAE,oCADuD;AAE5DC,gCAAY,EAAE,sBAACC,CAAD;AAAA,6BAAqBC,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACR,IAAb,CAArB;AAAA,qBAF8C;AAG5DW,8BAAU,EAAE,oBAACC,KAAD;AAAA,6BAAgBH,IAAI,CAACI,SAAL,CAAeD,KAAf,CAAhB;AAAA;AAHgD,mBAA9D;AAMA,sBAAME,OAAO,GAAG,iEAAUT,wBAAV,CAAhB;AAEAS,yBAAO,CAAC5B,SAAR,CACE,UAAA6B,GAAG,EAAI;AACL,wBAAMf,IAAI,GAAGe,GAAb;;AAEA,wBAAIf,IAAI,CAACgB,SAAT,EAAoB;AAClB;AACA,2BAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjB,IAAI,CAACgB,SAAL,CAAeE,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC9C,4BAAIE,QAAQ,GAAGnB,IAAI,CAACgB,SAAL,CAAeC,CAAf,CAAf;AACA,4BAAIG,MAAM,GAAG,MAAI,CAAC5C,OAAL,CAAa2C,QAAQ,CAACE,QAAtB,CAAb;AACA,4BAAIC,KAAK,GAAG,OAAZ;;AACA,4BAAIC,YAAY,GAAG,MAAI,CAAC1D,SAAL,CAAe2D,MAAf,CAAsB,UAAAC,CAAC;AAAA,iCAAIA,CAAC,CAACC,EAAF,KAASP,QAAQ,CAACE,QAAtB;AAAA,yBAAvB,CAAnB;;AACA,4BAAIE,YAAY,CAACL,MAAb,GAAsB,CAA1B,EAA6B;AAC3BI,+BAAK,GAAGC,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,EAA8B,iBAA9B,CAAR;AACA,gCAAI,CAACzD,IAAL,CAAUC,SAAV,GAAsBuD,KAAtB;AACD,yBAHD,MAGO;AACL,gCAAI,CAACxD,IAAL,CAAUC,SAAV,GAAsB,OAAtB;AACD;;AAGD,4BAAI4D,QAAQ,GAAG,IAAIvD,MAAM,CAACC,IAAP,CAAYO,MAAhB,CAAuBuC,QAAQ,CAACS,QAAhC,EAA0CT,QAAQ,CAACU,SAAnD,CAAf,CAb8C,CAc9C;;AACA,4BAAI,CAACT,MAAL,EAAa;AACXhC,iCAAO,CAACC,GAAR,CAAY,MAAZ,EADW,CAGhB;AACC;AACD;AACC;AACA;AACC;;AAGG,8BAAIyC,CAAC,GAAG,IAAI1D,MAAM,CAACC,IAAP,CAAY0D,MAAhB,CAAuB;AAC7BZ,oCAAQ,EAAEQ,QADmB;AAE7BpC,+BAAG,EAAE,MAAI,CAACA,GAFmB;AAG7ByC,iCAAK,EAAEb,QAAQ,CAACE,QAAT,CAAkBY,QAAlB,EAHsB;AAI7BnE,gCAAI,EAAE,MAAI,CAACA;AAJkB,2BAAvB,CAAR;AAgBA,gCAAI,CAACU,OAAL,CAAa2C,QAAQ,CAACE,QAAtB,IAAkCS,CAAlC;AACD,yBA5BD,MA4BO;AACL;AACA;AAEAV,gCAAM,CAACc,WAAP,CAAmBP,QAAnB,EAJK,CAKL;AACA;AACA;AAKD;AACF;AACF;AAEF,mBAjEH,EAkEE,UAAAQ,GAAG;AAAA,2BAAI/C,OAAO,CAACC,GAAR,CAAY8C,GAAZ,CAAJ;AAAA,mBAlEL,EAkE2B;AACzB;AAAA,2BAAM/C,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAN;AAAA,mBAnEF,CAmEgC;AAnEhC;AAuED,iBAnFD;AAqFD,eAxFD;AAyFD,aA7FD;AA+FD,WApGD;AAqGD;AA9JkB;AAAA;AAAA,oDAgKS+C,OAhKT,EAgKkBC,OAhKlB,EAgK2B;AAG5C,cAAIC,IAAI,GAAG,KAAKC,gBAAL,CAAsBH,OAAO,CAAC3D,GAAR,EAAtB,CAAX;AACA,cAAI+D,KAAK,GAAG,KAAKD,gBAAL,CAAsBH,OAAO,CAAC1D,GAAR,EAAtB,CAAZ;AACA,cAAI+D,IAAI,GAAG,KAAKF,gBAAL,CAAsBF,OAAO,CAAC5D,GAAR,EAAtB,CAAX;AACA,cAAIiE,KAAK,GAAG,KAAKH,gBAAL,CAAsBF,OAAO,CAAC3D,GAAR,EAAtB,CAAZ;AAGA,cAAIiE,IAAI,GAAID,KAAK,GAAGF,KAApB;AAGA,cAAII,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASH,IAAT,IAAiBE,IAAI,CAACE,GAAL,CAASN,IAAT,CAAzB;AACA,cAAIO,CAAC,GAAGH,IAAI,CAACE,GAAL,CAAST,IAAT,IAAiBO,IAAI,CAACC,GAAL,CAASL,IAAT,CAAjB,GAAkCI,IAAI,CAACC,GAAL,CAASR,IAAT,IACtCO,IAAI,CAACE,GAAL,CAASN,IAAT,CADsC,GACrBI,IAAI,CAACE,GAAL,CAASJ,IAAT,CADrB;AAGA,cAAIM,cAAc,GAAGJ,IAAI,CAACK,KAAL,CAAWN,CAAX,EAAcI,CAAd,CAArB;AAGA,iBAAO,KAAKG,gBAAL,CAAsBF,cAAtB,CAAP;AACD;AApLkB;AAAA;AAAA,yCAsLFG,OAtLE,EAsLO;AACxB,iBAAOA,OAAO,GAAGP,IAAI,CAACQ,EAAf,GAAoB,KAA3B;AACD;AAxLkB;AAAA;AAAA,yCA0LFC,OA1LE,EA0LO;AACxB,iBAAOA,OAAO,GAAG,KAAV,GAAkBT,IAAI,CAACQ,EAA9B;AACD;AA5LkB;AAAA;AAAA,gDA8LK;AAAA;;AACtB,eAAKzF,cAAL,CAAoB2F,cAApB,CAAmC,KAAKvE,OAAL,CAAawE,OAAhD,EAAyDtE,SAAzD,CAAmE,UAAAc,IAAI,EAAI;AACzE,iBAAK,IAAIyD,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGzD,IAAI,CAACkB,MAAjC,EAAyCuC,KAAK,EAA9C,EAAkD;AAChD,kBAAMC,OAAO,GAAG1D,IAAI,CAACyD,KAAD,CAApB;AACA,kBAAI9B,QAAQ,GAAG,IAAIvD,MAAM,CAACC,IAAP,CAAYO,MAAhB,CAAuB8E,OAAO,CAACC,QAA/B,EAAyCD,OAAO,CAACE,SAAjD,CAAf;AACA,kBAAIxF,MAAM,CAACC,IAAP,CAAY0D,MAAhB,CAAuB;AACrBZ,wBAAQ,EAAEQ,QADW;AAErBpC,mBAAG,EAAE,MAAI,CAACA,GAFW;AAGrByC,qBAAK,EAAE,cAHc;AAIrBlE,oBAAI,EAAE;AAAEwC,qBAAG,EAAE,6BAAP;AAAsCuD,0BAAQ,EAAE;AAAhD;AAJe,eAAvB;AAMD;AACF,WAXD;AAYD;AA3MkB;;AAAA;AAAA,OAArB;;;;cA6B6C;;cAChB;;cACG;;cACJ;;;;AALW,8DAApC,gEAAU,KAAV,EAAiB;AAAE,gBAAQ;AAAV,KAAjB,CAAoC,G,kBAAA,E,MAAA,E,MAAA;AA3B1BrG,YAAQ,6DALpB,gEAAU;AACTsG,cAAQ,EAAE,UADD;AAETC,cAAQ,EAAR;AAAA;AAAA,wFAFS;;;;AAAA,KAAV,CAKoB,GAARvG,QAAQ,CAAR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTb,QAAawG,eAAe;AACxB,+BAAoBC,UAApB,EAA4C;AAAA;;AAAxB,aAAAA,UAAA,GAAAA,UAAA;AAA2B;;AADvB;AAAA;AAAA,uCAKTC,KALS,EAKJ;AAChB,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB;AACA,+BAAiB,wBAFI;AAGrB,wBAAU;AAHW,aAAhB;AADO,WAApB;AAOA,iBAAO,KAAKH,UAAL,CAAgBI,GAAhB,CAAoB,uCAApB,EAA4DF,WAA5D,EAAyEG,IAAzE,CAA8E,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA9E,CAAP;AACH;AAjBuB;AAAA;AAAA,2CAmBLN,KAnBK,EAmBA;AACpB,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB;AACA;AACA,+BAAiB,wBAHI;AAIrB,wBAAU,qDAJW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBI,GAAhB,CAAoB,uCAApB,EAA4DF,WAA5D,EAAyEG,IAAzE,CAA8E,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA9E,CAAP;AACH;AAlCuB;AAAA;AAAA,kDAoCEN,KApCF,EAoCO;AAC3B,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB,CACrB;AACA;AACA;AACA;AAEA;AANqB,aAAhB;AADO,WAApB,CAD2B,CAW3B;AACD;;AACAhF,iBAAO,CAACC,GAAR,CAAY,uFAAuF6E,KAAK,CAAC7C,QAA7F,GAAuG,aAAvG,GAAuH6C,KAAK,CAACO,UAA7H,GAA0I,aAA1I,GAA0JP,KAAK,CAACQ,OAAhK,GAA0K,WAA1K,GAAyLR,KAAK,CAACS,OAA/L,GAAyM,WAAzM,GAAuNT,KAAK,CAACU,OAAzO;AACC,iBAAO,KAAKX,UAAL,CAAgBI,GAAhB,CAAoB,uFAAuFH,KAAK,CAAC7C,QAA7F,GAAuG,aAAvG,GAAuH6C,KAAK,CAACO,UAA7H,GAA0I,aAA1I,GAA0JP,KAAK,CAACQ,OAAhK,GAA0K,WAA1K,GAAyLR,KAAK,CAACS,OAA/L,GAAyM,WAAzM,GAAuNT,KAAK,CAACU,OAAjP,EAAyPT,WAAzP,EAAsQG,IAAtQ,CAA2Q,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA3Q,CAAP;AACH;AAnDuB;AAAA;AAAA,kCAuDdN,KAvDc,EAuDT;AACX,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB,kBADK;AAErB,+BAAiB,wBAFI;AAGrB,wBAAU,qDAHW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBY,IAAhB,CAAqB,uCAArB,EAA6DX,KAA7D,EAAmEC,WAAnE,EAAgFG,IAAhF,CAAqF,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAArF,CAAP;AACH;AAtEuB;AAAA;AAAA,gCAwEhB9C,EAxEgB,EAwEd;AACN,cAAMyC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB,kBADK;AAErB,+BAAiB,wBAFI;AAGrB,wBAAU,qDAHW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,WAAuB,2CAA2CvC,EAAlE,EAAqEyC,WAArE,EAAkFG,IAAlF,CAAuF,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAAvF,CAAP;AACH;AApFuB;AAAA;AAAA,+BAsFjBN,KAtFiB,EAsFZ;AACR,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB,kBADK;AAErB,+BAAiB,wBAFI;AAGrB,wBAAU,qDAHW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBa,GAAhB,CAAoB,2CAA2CZ,KAAK,CAACxC,EAArE,EAAwEwC,KAAxE,EAA8EC,WAA9E,EAA2FG,IAA3F,CAAgG,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAAhG,CAAP;AACH;AArGuB;AAAA;AAAA,oCAuGf;AAEL,cAAML,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACjB,8BAAgB;AADC,aAAhB,CADO;AAIhBW,2BAAe,EAAE;AAJD,WAApB;AAMA,cAAMC,IAAI,GAAG,4BAAb;AACA,iBAAO,KAAKf,UAAL,CAAgBY,IAAhB,CAAqB,uCAArB,EAA6DG,IAA7D,EAAkEb,WAAlE,EAA+EG,IAA/E,CAAoF,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAApF,CAAP;AACH;AAjHuB;AAAA;AAAA,mCAmHhB;AACJ,iBAAO,KAAKP,UAAL,CAAgBI,GAAhB,CAAoB,uCAApB,EAA6DC,IAA7D,CAAkE,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAAlE,CAAP;AACH;AArHuB;AAAA;AAAA,iCAwHlB;AACF,cAAML,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB;AACA;AACA,+BAAiB,wBAHI;AAIrB,wBAAU,qDAJW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBI,GAAhB,CAAoB,sCAApB,EAA2DF,WAA3D,EAAwEG,IAAxE,CAA6E,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA7E,CAAP;AACH;AApIuB;AAAA;AAAA,kCAuIjB;AAEH;AACA;AAEA,cAAIQ,IAAI,GAAG,4BAAX;AAGA,iBAAO,KAAKf,UAAL,CAAgBY,IAAhB,CAAqB,uCAArB,EAA6DG,IAA7D,EAAkE;AACrEZ,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB;AADK,aAAhB;AAD4D,WAAlE,EAIJE,IAJI,CAIC,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAJD,CAAP;AAKH;AApJuB;AAAA;AAAA,oCA0JJS,aA1JI,EA0J8B;AAClD,cAAIA,aAAa,CAACC,KAAd,YAA+BC,UAAnC,EAA+C;AAC3C/F,mBAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC4F,aAAa,CAACC,KAAd,CAAoBE,OAAvD;AACH,WAFD,MAEO;AACHhG,mBAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC4F,aAAnC;AACH,WALiD,CAMlD;;;AACA,iBAAO,wDAAW,+FAAX,CAAP;AACH;AAlKuB;;AAAA;AAAA,OAA5B;;;;cACoC;;;;AADvBjB,mBAAe,6DAD3B,iEAAW;AAAEqB,gBAAU,EAAE;AAAd,KAAX,CAC2B,GAAfrB,eAAe,CAAf","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-row>\\n      <ion-col>Olá, <font color=\\\"#4cb050\\\"><b>{{this.usuario.user_name}}</b></font><br>\\n             <font size=\\\"4\\\"><b>Acompanhe os caminhões</b></font>\\n    </ion-col>    \\n    </ion-row>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen [scrollEvents]=\\\"true\\\">\\n  <div #map id=\\\"map\\\"></div>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\nimport { HomePage } from './home.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"#map {\\n  height: 100%;\\n}\\n\\nion-menu-button {\\n  color: #FFFFFF;\\n  --background: #4cb050;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZG1pbi9Eb3dubG9hZHMvYXBwaG9yYWRvbGl4by1tYXN0ZXIvc3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQ0NKOztBRENFO0VBQ0UsY0FBQTtFQUNBLHFCQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI21hcCB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG4gIGlvbi1tZW51LWJ1dHRvbntcbiAgICBjb2xvcjogI0ZGRkZGRjtcbiAgICAtLWJhY2tncm91bmQ6ICM0Y2IwNTA7XG4gIH0iLCIjbWFwIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG5pb24tbWVudS1idXR0b24ge1xuICBjb2xvcjogI0ZGRkZGRjtcbiAgLS1iYWNrZ3JvdW5kOiAjNGNiMDUwO1xufSJdfQ== */\";","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { Usuario } from '../models/usuario';\nimport { AuthenticationService } from '../services/auth/authentication.service';\nimport { google } from \"google-maps\";\nimport { CaminhaoService } from '../services/caminhao/caminhao.service';\nimport { webSocket, WebSocketSubjectConfig } from \"rxjs/webSocket\";\nimport { WebSocketServer } from '@ionic-native/web-socket-server';\nimport { UsuarioService } from '../services/usuario/usuario.service';\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage implements OnInit {\n  public usuario: Usuario;\n\n  caminhoes = [];\n  icon = {\n  //  path: \"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z\", //SVG path of awesomefont marker\n    path: \"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z\",\n    fillColor: 'green', //color of the marker\n    fillOpacity: 1,\n    strokeWeight: 0,\n    scale: 0.05, //size of the marker, careful! this scale also affects anchor and labelOrigin\n    anchor: new google.maps.Point(200, 510), //position of the icon, careful! this is affected by scale\n    labelOrigin: new google.maps.Point(205, 190) //position of the label, careful! this is affected by scale\n  };\n\n  markers = [];\n  marker: google.maps.Marker;\n  lat = -20.672310;\n  lng = -43.771140;\n  map: google.maps.Map;\n  currentLat: any;\n  currentLong: any;\n  coordinates = new google.maps.LatLng(this.lat, this.lng);\n  mapOptions: google.maps.MapOptions = {\n    center: this.coordinates,\n    zoom: 14\n  };\n  @ViewChild('map', { static: false }) gmap: ElementRef;\n\n  constructor(private authenticationService: AuthenticationService,\n    private caminhaoService: CaminhaoService,\n    private localNotifications: LocalNotifications,\n    private usuarioService: UsuarioService) { }\n\n  ngOnInit() {\n    this.usuario = new Usuario();\n    this.authenticationService.currentUser\n      .subscribe(arg => {\n        this.usuario = arg;\n        console.log(this.usuario);\n\n      });\n  }\n\n  ngAfterViewInit() {\n    this.mapInitializer();\n    //this.buscarCaminhao();\n  }\n\n  mapInitializer() {\n    this.map = new google.maps.Map(this.gmap.nativeElement, this.mapOptions);\n    this.listarEnderecoUsuario();\n    this.caminhaoStart();\n    //this.findMe();\n  }\n\n  caminhaoStart() {\n    this.caminhaoService.TrackPost().subscribe(datapost => {\n      console.log(\"POST\");\n      console.log(datapost);\n\n\n      this.caminhaoService.BuscarDispositivos(null).subscribe(data => {\n        this.caminhoes = data;\n        console.log(\"caminhoes\");\n        console.log(data);\n        this.caminhaoService.Server().subscribe(dataServer => {\n          console.log(\"server\");\n          console.log(dataServer);\n          this.caminhaoService.Session().subscribe(dataSession => {\n\n            console.log(\"sessão\");\n            console.log(dataSession);\n            const DEFAULT_WEBSOCKET_CONFIG: WebSocketSubjectConfig<any> = {\n              url: 'ws://horadolixo.ml:8082/api/socket',\n              deserializer: (e: MessageEvent) => JSON.parse(e.data),\n              serializer: (value: any) => JSON.stringify(value),\n            };\n\n            const subject = webSocket(DEFAULT_WEBSOCKET_CONFIG);\n\n            subject.subscribe(\n              msg => {\n                const data = msg\n\n                if (data.positions) {\n                  // console.log(data);\n                  for (let i = 0; i < data.positions.length; i++) {\n                    var position = data.positions[i];\n                    let marker = this.markers[position.deviceId];\n                    let color = 'green';\n                    let caminhaoItem = this.caminhoes.filter(c => c.id === position.deviceId);\n                    if (caminhaoItem.length > 0) {\n                      color = caminhaoItem[0][\"attributes\"]['web.reportColor'];\n                      this.icon.fillColor = color;\n                    } else {\n                      this.icon.fillColor = 'green';\n                    }\n\n\n                    let location = new google.maps.LatLng(position.latitude, position.longitude);\n                    // console.log(this.markers);\n                    if (!marker) {\n                      console.log(\"novo\");\n\n                 //     this.localNotifications.schedule({\n                  //      text: 'Novo caminhao',\n                 //       trigger: {at: new Date(new Date().getTime() + 3600)},\n                  //      led: 'FF0000',\n                  //      sound: null\n                   //  });\n\n    \n                      let m = new google.maps.Marker({\n                        position: location,\n                        map: this.map,\n                        title: position.deviceId.toString(),\n                        icon: this.icon,\n                        \n                        // icon: { url: './assets/imgs/caminhao1.png', rotation: 0 },\n                       \n                        // label: {\n                        //   fontFamily: \"'Font Awesome 5 Free'\",\n                        //   text: '\\uf0d1', //icon code\n                        //  //text: 'Oi',\n                        //   fontWeight: '900', //careful! some icons in FA5 only exist for specific font weights\n                        //   color: '#FFFFFF', //color of the text inside marker\n                        // }\n                      });\n                      this.markers[position.deviceId] = m;\n                    } else {\n                      // console.log(\"atualizou\");\n                      // let locationAntiga = new google.maps.LatLng(marker.position.lat(), marker.position.lng());\n\n                      marker.setPosition(location);\n                      //  marker.setRotation(10,10);\n                      //this.getBearingBetweenTwoPoints1(locationAntiga, location)\n                      //  console.log(this.getBearingBetweenTwoPoints1(locationAntiga, location));\n\n\n\n\n                    }\n                  }\n                }\n\n              },\n              err => console.log(err), // Called if at any point WebSocket API signals some kind of error.\n              () => console.log('complete') // Called when connection is closed (for whatever reason).\n            );\n\n\n          });\n\n        });\n      });\n\n    });\n  }\n\n  getBearingBetweenTwoPoints1(latLng1, latLng2) {\n\n\n    let lat1 = this.degreesToRadians(latLng1.lat());\n    let long1 = this.degreesToRadians(latLng1.lng());\n    let lat2 = this.degreesToRadians(latLng2.lat());\n    let long2 = this.degreesToRadians(latLng2.lng());\n\n\n    let dLon = (long2 - long1);\n\n\n    let y = Math.sin(dLon) * Math.cos(lat2);\n    let x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1)\n      * Math.cos(lat2) * Math.cos(dLon);\n\n    let radiansBearing = Math.atan2(y, x);\n\n\n    return this.radiansToDegrees(radiansBearing);\n  }\n\n  degreesToRadians(degrees) {\n    return degrees * Math.PI / 180.0;\n  }\n\n  radiansToDegrees(radians) {\n    return radians * 180.0 / Math.PI;\n  }\n\n  listarEnderecoUsuario() {\n    this.usuarioService.ListarEndereco(this.usuario.user_id).subscribe(data => {\n      for (let index = 0; index < data.length; index++) {\n        const element = data[index];\n        let location = new google.maps.LatLng(element.addr_lat, element.addr_long);\n        new google.maps.Marker({\n          position: location,\n          map: this.map,\n          title: \"Meu Endereço\",\n          icon: { url: './assets/imgs/green-dot.png', rotation: 0 }\n        });\n      }\n    });\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Injectable({ providedIn: 'root' })\nexport class CaminhaoService {\n    constructor(private httpClient: HttpClient) { }\n\n    etapa1Model;\n\n    BuscarCaminhao(model): Observable<any> {\n        if (model == null) {\n            model = {}\n        }\n        const httpOptions = {\n            headers: new HttpHeaders({\n                //'Content-Type': 'application/json',\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\n            }),\n        };\n        return this.httpClient.get('http://horadolixo.ml:8082/api/devices',httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n    BuscarDispositivos(model): Observable<any> {\n        if (model == null) {\n            model = {}\n        }\n        const httpOptions = {\n            headers: new HttpHeaders({\n                //'Content-Type': 'application/json',\n                // 'Authorization': 'Basic ' + btoa('admin' + ':' + 'admin')\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\n\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\n            }),\n        };\n        return this.httpClient.get('http://horadolixo.ml:8082/api/devices',httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n    BuscarCaminhaoCoordenadas(model){\n        const httpOptions = {\n            headers: new HttpHeaders({\n                //'Content-Type': 'application/json',\n                // 'Authorization': 'Basic ' + btoa('admin' + ':' + 'admin')\n                //\"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\n                //\"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\n\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\n            }),\n        };\n        //return this.httpClient.get('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=17&startDate=2020-05-05&startTime=00:00:00&endDate=2020-05-05&endTime=23:59:59',httpOptions).pipe(catchError(this.handleError.bind(this)));\n       // console.log('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=' + model.deviceId +'&startDate=' + model.dataInicio + '&startTime=00:00:00&endDate=' +  model.dataFim + '&endTime=23:59:59');\n       console.log('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=' + model.deviceId +'&startDate=' + model.dataInicio + '&startTime=' + model.timeIni + '&endDate=' +  model.dataFim + '&endTime=' + model.timeFim);\n        return this.httpClient.get('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=' + model.deviceId +'&startDate=' + model.dataInicio + '&startTime=' + model.timeIni + '&endDate=' +  model.dataFim + '&endTime=' + model.timeFim,httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n  \n    \n    Cadastrar(model): Observable<any> {\n        if (model == null) {\n            model = {}\n        }\n        const httpOptions = {\n            headers: new HttpHeaders({\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\n\n\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\n            }),\n        };\n        return this.httpClient.post('http://horadolixo.ml:8082/api/devices',model,httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n    Deletar(id): Observable<any> {\n        const httpOptions = {\n            headers: new HttpHeaders({\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\n\n\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\n            }),\n        };\n        return this.httpClient.delete('http://horadolixo.ml:8082/api/devices/' + id,httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n    Editar(model): Observable<any> {\n        if (model == null) {\n            model = {}\n        }\n        const httpOptions = {\n            headers: new HttpHeaders({\n                'Content-Type': 'application/json',\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\n\n\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\n            }),\n        };\n        return this.httpClient.put('http://horadolixo.ml:8082/api/devices/' + model.id,model,httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n    TrackPost(): Observable<any> {\n       \n        const httpOptions = {\n            headers: new HttpHeaders({\n                    \"content-type\": \"application/x-www-form-urlencoded\"\n            }),\n            withCredentials: true\n        };\n        const body = 'email=admin&password=admin';\n        return this.httpClient.post('http://horadolixo.ml:8082/api/session',body,httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n    TrackGet(): Observable<any> {\n        return this.httpClient.get('http://horadolixo.ml:8082/api/session').pipe(catchError(this.handleError.bind(this)));\n    }\n\n    \n    Server(): Observable<any> {\n        const httpOptions = {\n            headers: new HttpHeaders({\n                //'Content-Type': 'application/json',\n                // 'Authorization': 'Basic ' + btoa('admin' + ':' + 'admin')\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\n\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\n            }),\n        };\n        return this.httpClient.get('http://horadolixo.ml:8082/api/server',httpOptions).pipe(catchError(this.handleError.bind(this)));\n    }\n\n        \n    Session(): Observable<any> {\n       \n        // const header = new Headers();\n        // header.append('Content-Type', 'application/x-www-form-urlencoded');\n\n        let body = 'email=admin&password=admin';\n      \n    \n        return this.httpClient.post('http://horadolixo.ml:8082/api/session',body,{\n            headers: new HttpHeaders({\n                'Content-Type': 'application/x-www-form-urlencoded'\n            })\n        }).pipe(catchError(this.handleError.bind(this)));\n    }\n\n\n\n    \n\n    private handleError(errorResponse: HttpErrorResponse) {\n        if (errorResponse.error instanceof ErrorEvent) {\n            console.log('Client Side Error :', errorResponse.error.message);\n        } else {\n            console.log('Server Side Error :', errorResponse);\n        }\n        // return an observable with a meaningful error message to the end user\n        return throwError('There is a problem with the service. We are notified & working on it. Please try again later.');\n    }\n\n}"]}